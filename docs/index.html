<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Obfuscate Commons</title>
  <link rel="stylesheet" href="/obfuscate_commons/css/styles.css">
</head>
<body>
  <div id="glyphs"></div>
  <div id="fog"></div>

  <div id="container">
    <h1>Obfuscate Commons</h1>
    <p>Enter the passphrase to gain access to our hidden chatroom server.</p>
    <input id="access" type="text" placeholder="Passphrase" />
    <button id="enter-btn" onclick="checkAccess()">Enter</button>
    <div id="error">Access denied. Try again.</div>
  </div>

  <script>
    const correctPass = "undercommons";

    function checkAccess() {
      const val = document.getElementById("access").value.trim().toLowerCase();
      if (val === correctPass) {
        window.location.href = "/obfuscate_commons/map.html?key=" + encodeURIComponent(val);
      } else {
        document.getElementById("error").style.display = "block";
      }
    }

    document.getElementById("access")
      .addEventListener("keypress", e => {
        if (e.key === "Enter") checkAccess();
      });

    const glyphs = ["\u2736","\u2738","\u273A","\u2735","\u2737","\u2739","\u2749","\u2727"];
    const gContainer = document.getElementById("glyphs");
    for (let i = 0; i < 42; i++) {
      const g = document.createElement("div");
      g.className = "glyph";
      g.innerText = glyphs[Math.floor(Math.random() * glyphs.length)];
      g.style.left = Math.random()*100 + "vw";
      g.style.top  = Math.random()*100 + "vh";
      g.style.animationDuration = (30 + Math.random()*25) + "s";
      g.style.fontSize = (1.1 + Math.random()*2) + "em";
      gContainer.appendChild(g);
    }
  </script>
</body>
</html>